{"version":3,"file":"_server.ts-CTX9H3S6.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/languages/add-custom/_server.ts.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { d as db } from \"../../../../../chunks/database.js\";\nconst POST = async ({ request }) => {\n  let payload;\n  try {\n    payload = await request.json();\n  } catch {\n    return json({ error: \"Invalid JSON payload.\" }, { status: 400 });\n  }\n  const name = typeof payload.name === \"string\" ? payload.name.trim() : \"\";\n  const code = typeof payload.code === \"string\" ? payload.code.trim() : \"\";\n  const prompt = typeof payload.prompt === \"string\" ? payload.prompt : \"\";\n  const romanize = Boolean(payload.romanize);\n  if (!name || !code) {\n    return json({ error: \"Name and code are required.\" }, { status: 400 });\n  }\n  try {\n    const insertLanguage = db.prepare(\n      \"INSERT INTO languages (code, name, romanize, prompt) VALUES (?, ?, ?, ?)\"\n    );\n    insertLanguage.run(code, name, romanize ? 1 : 0, prompt);\n    return json({ success: true });\n  } catch (error) {\n    if (error?.code === \"SQLITE_CONSTRAINT_PRIMARYKEY\") {\n      return json({ error: \"A language with that code already exists.\" }, { status: 400 });\n    }\n    console.error(\"Failed to add custom language:\", error);\n    return json({ error: \"Failed to add language.\" }, { status: 500 });\n  }\n};\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;;;;AAEK,MAAC,IAAI,GAAG,OAAO,EAAE,OAAO,EAAE,KAAK;AACpC,EAAE,IAAI,OAAO;AACb,EAAE,IAAI;AACN,IAAI,OAAO,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE;AAClC,EAAE,CAAC,CAAC,MAAM;AACV,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,uBAAuB,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACpE,EAAE;AACF,EAAE,MAAM,IAAI,GAAG,OAAO,OAAO,CAAC,IAAI,KAAK,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE;AAC1E,EAAE,MAAM,IAAI,GAAG,OAAO,OAAO,CAAC,IAAI,KAAK,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE;AAC1E,EAAE,MAAM,MAAM,GAAG,OAAO,OAAO,CAAC,MAAM,KAAK,QAAQ,GAAG,OAAO,CAAC,MAAM,GAAG,EAAE;AACzE,EAAE,MAAM,QAAQ,GAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC;AAC5C,EAAE,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE;AACtB,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,6BAA6B,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC1E,EAAE;AACF,EAAE,IAAI;AACN,IAAI,MAAM,cAAc,GAAG,EAAE,CAAC,OAAO;AACrC,MAAM;AACN,KAAK;AACL,IAAI,cAAc,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,GAAG,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC;AAC5D,IAAI,OAAO,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;AAClC,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,IAAI,KAAK,EAAE,IAAI,KAAK,8BAA8B,EAAE;AACxD,MAAM,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,2CAA2C,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC1F,IAAI;AACJ,IAAI,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,KAAK,CAAC;AAC1D,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,yBAAyB,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACtE,EAAE;AACF;;;;"}